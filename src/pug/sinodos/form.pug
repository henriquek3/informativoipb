extends ../layouts/_layout.pug

block content

    include ../includes/_messages

    div.ui.segment
        a.ui.right.floated.blue.tiny.button(href='/cadastros/sinodos')
            i.reply.icon
            | Voltar

        h3.ui.floated.header(style='padding-top: 6px;padding-left: 10px;')
            i.edit.outline.icon
        h1.ui.floated.header(style='margin-left: -10px;')
            | Cadastro de Sínodos
            div.sub.header(style='margin-left: -40px;')
                | Para cadastrar um sínodo informe o nome, sigla e a região.

        div.ui.clearing.divider
        p
        form(id="formDelete", name="formDelete", action!="{{ url()->current() }}", method="post")
            | @csrf
            | @method("delete")

        form(id="formResource", name="formResource" method='POST' action!='{{url()->current()}}')
            | @csrf
            div.ui.form
                div.fields
                    div.eight.wide.required.field
                        label Nome
                        input(type="text", name="nome", placeholder="Digite o Nome" required='' maxlength='50')

                    div.three.wide.required.field
                        label Sigla
                        input(type="text", name="sigla", placeholder="Digite a Sigla" required='' minlength='3' maxlength='10')

                    div.six.wide.required.field
                        label Região
                        select.ui.search.dropdown(name="regiao" required='')
                            option(value="") Região
                            option(value="1") NORTE
                            option(value="2") NORDESTE
                            option(value="3") CENTRO-OESTE
                            option(value="4") SUDESTE
                            option(value="5") SUL

            div.ui.segments
                div.ui.horizontal.segments
                    div.ui.segment
                        span(style="color: lightslategray;")
                            strong Usuário:
                        span(style="color: lightslategray;")
                            | &nbsp; {{ isset($resource) === true ? $resource->usuario_auditoria : ''}}
                            span(id="user_inc")
                            | &nbsp;
                        span(style="float: right;color: lightslategray;")
                            strong Data:
                            | &nbsp; {{ isset($resource) === true ? $resource->updated_at->format("d/m/Y h:m") : ''}}
                            span(id="data_inc")

            div.ui.clearing.divider

            div(style="text-align: center")
                button.ui.green.labeled.icon.button(type="submit")
                    i.plus.icon
                    | Gravar

                button.ui.reset.button(type="reset")
                    i.minus.icon
                    | Limpar

                button.ui.red.right.labeled.icon.button(type="submit" form='formDelete')
                    i.remove.icon
                    | Excluir

block specific-js
    script(type='text/javascript' async).
        $(document).ready(function () {
        });
    | @isset($resource)
    script(type='text/javascript' async).
        try {
            var sinodo = JSON.parse('{!! $resource !!}');
            formResource.nome.value = sinodo.nome !== null ? sinodo.nome : '';
            formResource.sigla.value = sinodo.sigla !== null ? sinodo.sigla : '';
            formResource.regiao.value = sinodo.regiao !== null ? sinodo.regiao : '';
            $(formResource).append('<input type="hidden" name="_method" value="put">');
        } catch (e) {
            alert('As informações não puderam ser carregadas, por favor entre em contato com o suporte.');
        }
    | @endisset

