"use strict";var id_row=void 0,tr_row=void 0,tbl_sinodos=void 0,tbl_api=void 0;tbl_sinodos=$("#tbl_sinodos"),$(document).ready(function(){function instanciaDataTables(){setTimeout(function(){tbl_api=tbl_sinodos.DataTable({language:{sEmptyTable:"Nenhum registro encontrado",sInfo:"Mostrando de _START_ até _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 até 0 de 0 registros",sInfoFiltered:"(Filtrados de _MAX_ registros)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"_MENU_  Resultados por página",sLoadingRecords:"Carregando...",sProcessing:"Processando...",sZeroRecords:"Nenhum registro encontrado",sSearch:"Pesquisar",select:{rows:"  |  %d linha selecionada"},oPaginate:{sNext:"Próximo",sPrevious:"Anterior",sFirst:"Primeiro",sLast:"Último"},oAria:{sSortAscending:": Ordenar colunas de forma ascendente",sSortDescending:": Ordenar colunas de forma descendente"}}}),tbl_api.page("next").draw(!1),$("#tbody_sinodos").off("click","**").on("click","tr",function(){$(this).hasClass("active")?($(this).removeClass("active"),id_row=null):(tbl_api.$("tr.active").removeClass("active"),$(this).addClass("active"),id_row=$(this).find("td:first").html(),tr_row=$(this)),console.log(id_row)})},1e3)}function deleteData(){id_row>0&&swal({title:"Você tem certeza disso?",text:"Uma vez deletado, não há como desfazer!",icon:"warning",dangerMode:!0,buttons:{cancel:{text:"Cancelar",visible:!0,value:!1,closeModal:!0},confirm:!0},closeModal:!1,closeOnClickOutside:!1}).then(function(resolve){resolve?$.post("/api/sinodos/delete",{id:id_row}).done(function(){tbl_api.row(".active").remove().draw(!1),swal("Deletado!","Seu registro foi deletado.","success"),id_row=null,cadastros_sinodos.reset()}).fail(function(response){console.log(response),swal("Erro!",response.responseText,"error")}):swal.close()})}$.validator.setDefaults({debug:!0,ignore:".search",submitHandler:function(){return!1}}),$(".menu .item").tab(),$(".datepicker2").datepicker({todayBtn:"linked",daysOfWeekHighlighted:"0,6",autoclose:!0,todayHighlight:!0,language:"pt-BR"}),$(".ui.dropdown").dropdown(),instanciaDataTables();var validator=$("#cadastros_sinodos").validate({rules:{nome:{required:!0,minlength:4,maxlength:255},sigla:{required:!0,minlength:3,maxlength:5}},highlight:function(element,errorClass,validClass){$(element).parent().addClass(errorClass)},unhighlight:function(element,errorClass,validClass){$(element).parent().removeClass(errorClass)},invalidHandler:function(){alert("invelid handler")},submitHandler:function(){if(id_row>0){var form=$("#cadastros_sinodos").serializeArray();form.unshift({name:"id",value:id_row}),$.post("api/sinodos/update",form).done(function(response){tbl_api.row(tr_row).remove(),tbl_api.row.add([response.id,response.nome.toUpperCase(),response.id_empresa.toUpperCase(),response.cnpj.toUpperCase()]).draw(!1),$.notify({title:"Status OK!<br/>",message:"Registro Alterado com sucesso!",icon:"fa fa-check"},{type:"success"})}).fail(function(response){console.log(response),$.notify({title:"Operação não efetuada.<br/>",message:"Erro: "+response.status+", "+response.statusText},{type:"danger",delay:1e4})})}else{var _form=$("#cadastros_sinodos").serializeArray();$.post("api/sinodos/store",_form).done(function(response){console.log(response),setTimeout(function(){$("input.error").parent().removeClass("has-error"),$("input.valid").parent().removeClass("has-success")},600),tbl_api.row.add([response.id,response.nome.toUpperCase(),response.id_empresa.toUpperCase(),response.cnpj.toUpperCase()]).draw(!1),$.notify({title:"Status OK!<br/>",message:"Registro inserido com sucesso!",icon:"fa fa-check"},{type:"success"})}).fail(function(response){console.log(response),$.notify({title:"Operação não efetuada.<br/>",message:"Erro: "+response.status+", "+response.statusText},{type:"danger",delay:1e4})})}}});$("#cadastros_sinodos").form({inline:!0,on:"submit",fields:{dropdown:{identifier:"regiao",rules:[{type:"empty",prompt:"Este campo é requerido."}]}}}),$(".ui.reset.button").on("click",function(){validator.resetForm(),$("form").form("reset")}),$("button[type='button']").on("click",function(){deleteData()})});