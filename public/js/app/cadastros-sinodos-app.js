"use strict";var id_row=void 0,tr_row=void 0,tbl_sinodos=void 0,tbl_api=void 0;tbl_sinodos=$("#tbl_sinodos"),$(document).ready(function(){function getDataTable(){$.get("/api/sinodos").done(function(response){for(var key in response){var tr=void 0,row=void 0,id=void 0,regiao=void 0,nome=void 0,sigla=void 0;switch(tr=$("<tr/>"),row=response[key],id=$("<td/>").html(row.id),nome=$("<td/>").html(row.nome),sigla=$("<td/>").html(row.sigla),row.regiao){case"1":regiao=$("<td/>").html("CENTRO-OESTE");break;case"2":regiao=$("<td/>").html("NORDESTE");break;case"3":regiao=$("<td/>").html("NORTE");break;case"4":regiao=$("<td/>").html("SUDESTE");break;case"5":regiao=$("<td/>").html("SUL");break;default:regiao=$("<td/>").html("Não identificado")}tr.append(id).append(nome).append(sigla).append(regiao),$("#tbody_sinodos").append(tr)}}).fail(function(response){console.log(response)})}function instanciaDataTables(){setTimeout(function(){tbl_api=tbl_sinodos.DataTable({language:{sEmptyTable:"Nenhum registro encontrado",sInfo:"Mostrando de _START_ até _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 até 0 de 0 registros",sInfoFiltered:"(Filtrados de _MAX_ registros)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"_MENU_  Resultados por página",sLoadingRecords:"Carregando...",sProcessing:"Processando...",sZeroRecords:"Nenhum registro encontrado",sSearch:"Pesquisar",select:{rows:"  |  %d linha selecionada"},oPaginate:{sNext:"Próximo",sPrevious:"Anterior",sFirst:"Primeiro",sLast:"Último"},oAria:{sSortAscending:": Ordenar colunas de forma ascendente",sSortDescending:": Ordenar colunas de forma descendente"}}}),tbl_api.page("next").draw(!1),$("#tbody_sinodos").off("click","**").on("click","tr",function(){$(this).hasClass("active")?($(this).removeClass("active"),id_row=null):(tbl_api.$("tr.active").removeClass("active"),$(this).addClass("active"),id_row=$(this).find("td:first").html(),tr_row=$(this)),console.log(id_row)})},1e3)}function deleteData(){id_row>0&&swal({title:"Você tem certeza disso?",text:"Uma vez deletado, não há como desfazer!",icon:"warning",dangerMode:!0,buttons:{cancel:{text:"Cancelar",visible:!0,value:!1,closeModal:!0},confirm:!0},closeModal:!1,closeOnClickOutside:!1}).then(function(resolve){resolve?$.post("/api/sinodos/delete",{id:id_row}).done(function(){tbl_api.row(".active").remove().draw(!1),swal("Deletado!","Seu registro foi deletado.","success"),id_row=null,cadastros_sinodos.reset()}).fail(function(response){console.log(response),swal("Erro!",response.responseText,"error")}):swal.close()})}$.validator.setDefaults({debug:!0,ignore:".search",submitHandler:function(){return!1}}),$(".menu .item").tab(),$(".datepicker2").datepicker({todayBtn:"linked",daysOfWeekHighlighted:"0,6",autoclose:!0,todayHighlight:!0,language:"pt-BR"}),$(".ui.dropdown").dropdown(),getDataTable(),instanciaDataTables();var validator=$("#cadastros_sinodos").validate({rules:{nome:{required:!0,minlength:4,maxlength:255},sigla:{required:!0,minlength:3,maxlength:5}},highlight:function(element,errorClass,validClass){$(element).parent().addClass(errorClass)},unhighlight:function(element,errorClass,validClass){$(element).parent().removeClass(errorClass)},invalidHandler:function(){alert("Submit inválido")},submitHandler:function(){if(id_row>0){var form=$("#cadastros_sinodos").serializeArray();form.unshift({name:"id",value:id_row}),$.post("api/sinodos/update",form).done(function(response){console.log(response),iziToast.success({title:"OK",message:"Registro alterado com sucesso!",timeout:1e4,pauseOnHover:!0,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"})}).fail(function(response){console.log(response),iziToast.error({title:"Erro",message:"Operação não realizada!",timeout:1e4,pauseOnHover:!0,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"})})}else{var _form=$("#cadastros_sinodos").serializeArray();$.post("api/sinodos/store",_form).done(function(response){console.log(response),iziToast.success({title:"OK",message:"Registro inserido com sucesso!",timeout:1e4,pauseOnHover:!0,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"})}).fail(function(response){console.log(response),iziToast.error({title:"Erro",message:"Operação não realizada!",timeout:1e4,pauseOnHover:!0,position:"topRight",transitionIn:"fadeInDown",transitionOut:"fadeOutUp"})})}}});$("#cadastros_sinodos").form({inline:!0,on:"submit",fields:{dropdown:{identifier:"regiao",rules:[{type:"empty",prompt:"Este campo é requerido."}]}}}),$(".ui.reset.button").on("click",function(){validator.resetForm(),$("form").form("reset")}),$("button[type='button']").on("click",function(){deleteData()})});